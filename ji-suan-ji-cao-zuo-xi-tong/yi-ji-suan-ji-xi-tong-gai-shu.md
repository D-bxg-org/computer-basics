# 一 计算机系统概述

## 1 操作系统的概念

### 1.1 控制管理软件硬件资源

操作系统是系统资源管理者

1. 处理机（cpu）
2. 存储器（内存）
3. 设备（外设，输入输出）
4. 文件（外存，硬盘）

### 1.2 提供接口和环境

向上层软件提供服务

1. 图形界面
   1. 图形化用户接口/界面（GUI）
2. 用户接口
   1. 命令接口
      1. 联机命令接口（交互式 cmd）
      2. 脱机命令接口（批处理 \*.bat）
   2. 程序接口（API，include.h，库）

### 1.3 系统软件

最接近底层

 裸机 -&gt; 可用机器

有操作系统的机器被称为**扩充机器**，或者**虚拟机**

## **2 操作系统的特征**

### **2.1 并发**

#### 2.1.1 概念

宏观同时，微观交替

#### 2.1.2 记忆

1. 并行：同时发生
2. 操作系统和并发同时诞生
3. 单核CPU的程序是并发的，一次只能执行一个程序
4. 多核CPU的程序可用并行

### **2.2共享**

#### **2.2.1 概念**

资源共享，系统中的资源可用给内存中并发执行的进程共同使用

#### 2.2.2 互斥共享方式

一个资源同个时间内只能有一个程序使用

#### 2.2.2 同时共享方式

一个资源同个时间内，宏观上可用多个程序访问，微观是交替

### **2.3虚拟**

虚拟存储器

虚拟多核CPU

空分复用技术

时分复用技术

### **2.4异步**

#### 2.4.1 概念

无法访问资源，只能停住

有并发的存在才有异步的存在

## 3 OS发展与分类

### 3.1 手工

慢，人机速度矛盾

### 3.2 批处理

#### 3.2.1 单道批处理

引入脱机输入输出

资源利用率依旧很低

#### 3.2.2 多道批处理

操作系统开始出现

不提供人机交互

### 3.3 分时

不能优先处理紧急任务

### 3.4 实时

## 4 操作系统的运行机制

### 4.1 程序

1. 内核程序
2. 应用程序

### 4.2 指令

1. 特权指令
   * 只允许内核发布，如CPU清零
2. 非特权指令
   * 用户写的应用程序发布的指令

### 4.3 处理机状态

程序状态字寄存器（PSW）

1. 内核态（核心态/管态）：特权指令
2. 用户态（目态）：非特权指令

中断在CPU是用户态，但执行了特权指令后发生，此时CPU会拒绝执行特权指令，然后转换为内核态，执行处理中断信号的内核程序，也就是特权指令，之后再返回用户态

## 5 中断和异常

中断  
用户态 -&gt; 中断 -&gt; 核心态 -&gt; 处理中断 -&gt; 用户态

作用：  
让操作系统强行夺回CPU的控制权  
从用户态转换成核心态

### 5.1 中断（外中断）

来自外部  
与当前CPU执行的指令无关

1. 时钟
2. I/O

### 5.2 异常（内中断）

来自CPU内部  
执行处理中断信号的内核程序

1. 陷阱、陷入（trap）
2. 故障（fault）
3. 终止（abort）

### 5.3 中断原理

检查中断信号

找到相应的中断处理程序（中断向量表）

## 6 系统调用

### 6.1 什么是系统调用（概念的定义）

